¥# ADR-006: ルーム管理のライフサイクルと配送方針

# Status
- Draft: 記述中またはレビュー中

# Decision
ルームのライフサイクルと配送方針は以下の通りとする。
- ルームIDは外部指定/マッチング結果生成の両方を許容する
- スケールはルーム数単位で管理する
- ルームの作成・破棄はユーザー参加状態に応じて行う
- 空室が一定時間継続したルームは破棄する
- ルーム配送は best-effort とする
- バックプレッシャーはエラーで返す
- 容量超過は Dispatcher の register で拒否する

# Context
ルーム管理において、ライフサイクルと配送方針の整理が必要だった。
とくに、ルームIDの生成方法、スケール単位、破棄条件、配送保証、
バックプレッシャー時の扱い、容量超過の責務分離を明確にする。

# Consideration
- スケール設定は min/max/scale-in 秒数を前提とする
- 当面はハードコードし、後に環境変数へ移行する

# Consequences
Pros
- ルーム管理の責務が明確になり、Dispatcher で容量判定できる
- 配送保証を best-effort に統一し、実装が単純化される
Cons
- 再送や配送保証はアプリケーション側で対応が必要
